<%- include('../views/partials/header') %>

<div class="container mt-5">
  <h1>Assignments</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Course</th>
        <th>Due</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% assignments.forEach(function(a){ %>
        <tr>
          <td><%= a.title %></td>
          <td><%= a.course %></td>
          <td><%= a.dueDate.toDateString() %></td>
          <td>
            <a class="btn btn-sm btn-secondary" href="/assignments/edit/<%= a._id %>">Edit</a>
            <form class="d-inline delete-form" method="POST" action="/assignments/delete/<%= a._id %>">
              <button type="submit" class="btn btn-sm btn-danger">Delete</button>
            </form>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>

<%- include('../views/partials/footer') %>

<!-- Load del.js from public -->
<script src="/js/del.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.delete-form').forEach(form => {
      form.addEventListener('submit', confirmDelete);
    });
  });
</script>
